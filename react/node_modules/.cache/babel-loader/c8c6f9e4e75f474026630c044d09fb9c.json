{"ast":null,"code":"var _jsxFileName = \"/Users/bikaladhikari/Desktop/FinalYearProject/react/src/AdminPrivateRoute.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Route, Redirect, useHistory } from 'react-router-dom';\nimport axios from 'axios';\nimport MasterLayout from './layouts/admin/MasterLayout';\nimport swal from 'sweetalert';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction AdminPrivateRoute(_ref) {\n  _s();\n  let {\n    ...rest\n  } = _ref;\n  const history = useHistory();\n  const [Authenticated, setAuthenticated] = useState(false);\n  const [loading, setloading] = useState(true);\n  useEffect(() => {\n    axios.get(`/api/checkingAuthenticated`).then(res => {\n      if (res.status === 200) {\n        setAuthenticated(true);\n      }\n      setloading(false);\n    });\n    return () => {\n      setAuthenticated(false);\n    };\n  }, []);\n  axios.interceptors.response.use(undefined, function axiosRetryInterceptor(err) {\n    if (err.response.status === 401) {\n      swal(\"Unauthorized\", err.response.data.message, \"warning\");\n      history.push('/');\n    }\n    return Promise.reject(err);\n  });\n  axios.interceptors.response.use(function (response) {\n    return response;\n  }, function (error) {\n    if (error.response.status === 403)\n      // Access Denied\n      {\n        swal(\"Forbidden\", error.response.data.message, \"warning\");\n        history.push('/403');\n      } else if (error.response.status === 404)\n      //Page Not Found\n      {\n        swal(\"404 Error\", \"Url/Page Not Found\", \"warning\");\n        history.push('/404');\n      }\n    return Promise.reject(error);\n  });\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"Loading...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Route, {\n    ...rest,\n    render: _ref2 => {\n      let {\n        props,\n        location\n      } = _ref2;\n      return Authenticated ? /*#__PURE__*/_jsxDEV(MasterLayout, {\n        ...props\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 19\n      }, this) : /*#__PURE__*/_jsxDEV(Redirect, {\n        to: {\n          pathname: \"/login\",\n          state: {\n            from: location\n          }\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 19\n      }, this);\n    }\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 9\n  }, this);\n}\n_s(AdminPrivateRoute, \"93YSMh6h+2IHGh39rorsPBcp+Yg=\", false, function () {\n  return [useHistory];\n});\n_c = AdminPrivateRoute;\nexport default AdminPrivateRoute;\nvar _c;\n$RefreshReg$(_c, \"AdminPrivateRoute\");","map":{"version":3,"names":["React","useState","useEffect","Route","Redirect","useHistory","axios","MasterLayout","swal","jsxDEV","_jsxDEV","AdminPrivateRoute","_ref","_s","rest","history","Authenticated","setAuthenticated","loading","setloading","get","then","res","status","interceptors","response","use","undefined","axiosRetryInterceptor","err","data","message","push","Promise","reject","error","children","fileName","_jsxFileName","lineNumber","columnNumber","render","_ref2","props","location","to","pathname","state","from","_c","$RefreshReg$"],"sources":["/Users/bikaladhikari/Desktop/FinalYearProject/react/src/AdminPrivateRoute.js"],"sourcesContent":["import React, {useState,useEffect} from 'react';\nimport {Route, Redirect, useHistory} from 'react-router-dom';\nimport axios from 'axios';\nimport MasterLayout from './layouts/admin/MasterLayout';\nimport swal from 'sweetalert';\n\nfunction AdminPrivateRoute({...rest}) {\n\n    const history = useHistory();\n\n    const [Authenticated, setAuthenticated] = useState(false);\n    const [loading, setloading] = useState(true);\n\n    useEffect(() => {\n\n        axios.get(`/api/checkingAuthenticated`).then(res=> {\n            if(res.status === 200)\n            {\n                setAuthenticated(true);\n            }\n            setloading(false);\n        });\n\n        return () => {\n            setAuthenticated(false);\n        };\n    }, []);\n\n    axios.interceptors.response.use(undefined, function axiosRetryInterceptor(err) {\n        if(err.response.status === 401)\n        {\n            swal(\"Unauthorized\",err.response.data.message,\"warning\");\n            history.push('/');\n        }\n        return Promise.reject(err);\n    });\n\n    axios.interceptors.response.use(function (response) {\n            return response;\n        }, function (error) {\n            if(error.response.status === 403) // Access Denied\n            {\n                swal(\"Forbidden\",error.response.data.message,\"warning\");\n                history.push('/403');\n            }\n            else if(error.response.status === 404) //Page Not Found\n            {\n                swal(\"404 Error\",\"Url/Page Not Found\",\"warning\");\n                history.push('/404');\n            }\n            return Promise.reject(error);\n        }\n    );\n\n    if(loading)\n    {\n        return <h1>Loading...</h1>\n    }\n\n    return (\n\n        <Route {...rest}\n            render={ ({props, location}) => \n                Authenticated ?\n                ( <MasterLayout {...props} /> ) :\n                ( <Redirect to={{pathname: \"/login\", state: {from: location} }} /> ) \n            }\n        />\n\n    );\n}\n\nexport default AdminPrivateRoute;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}